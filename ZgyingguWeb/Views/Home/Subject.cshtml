@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="row">
    <table id="SubjectInfo" class="table">
        <thead>
            <tr>
                <th>发布者</th>
                <th>发布主题</th>
                <th>发布时间</th>
            </tr>
        </thead>

    </table>

    <input type="button" value="添加数据" onclick="SubjectSave()"/>

    <input type="button" value="注册新用户" onclick="RegUser()" />

    <input type="button" value="登陆" onclick="LoginUser()" />


    <input type="button" value="用户信息修改" onclick="UpdateUser()" />
    <div id="result"></div>
</div>

@section scripts{
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            //$.getJSON("/api/subjects", function (data) {
            //    if (data.length > 0)
            //    {
            //        $.each(data, function (i,item) {
            //            $("#SubjectInfo").append("<tr><td>" + item.creatorNameField + "</td><td>" + item.subjectNameField + "</td><td>" + item.createTimeField + "</td></tr>");
            //        });
                    
            //     }
            //});
        });

        function SubjectSave()
        {
            $.ajax({
                type: "post",
                url: "/api/Comment",
                data: {
                    Token: "token123456789",
                    SubjectId: 2,
                    CommentContent: '哎呦，不错哟'
                },
                async: true,
                dataType: "json",
                success: function (data) {
                    alert("回复成功");
                }
            });
        }

        function RegUser()
        {
            $.ajax({
                type: "post",
                url: "/api/Users",
                data: {
                    UserName: '709121696@qq.com',
                    Password: '123456',
                    DisplayName: '刘德华'
                },
                async: true,
                dataType: "json",
                success: function (data) {
                    if (data)
                        {
                        alert("注册成功");
                    }
                    else
                    {
                        alert("注册失败");
                    }
                }
            });
        }

        function LoginUser() {
            $.ajax({
                type: "post",
                url: "/api/Account",
                data: {
                    UserName: '709121696@qq.com',
                    Password: '132131231312',
                },
                async: true,
                dataType: "json",
                success: function (data) {
                    if (data != null) {
                        alert(data.DisplayName);
                        alert("注册成功");
                    }
                    else {
                        alert("用户名或密码错误");
                    }
                }
            });
        }

        function UpdateUser()
        {
            $.ajax({
                type: "post",
                url: "/api/Users?id=8",
                data: {
                    UserHeadImg: 'images/chenjt.jpg'
                },
                async: true,
                dataType: "json",
                success: function (data) {
                    alert("成功");
                }
            });
        }
         
    </script>
}
